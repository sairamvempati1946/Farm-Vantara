<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <link rel="icon" type="image/png" href="./favicon.png">
    <title>Shop Fresh Farm Produce Online | Farm Vantara – Direct from Farm to Table</title>
    <meta name="description" content="Buy fresh fruits, vegetables, grains, and dairy directly from verified farmers on Farm Vantara. Farm-to-table delivery, organic produce, competitive prices. Free delivery on first order.">
    <meta name="keywords" content="buy fresh vegetables online, farm to table delivery, organic fruits online, direct from farm produce, fresh fruits delivery, online vegetable shopping, farm fresh dairy, grain purchase online, seasonal vegetables, fresh produce marketplace">
    <meta name="author" content="Farm Vantara">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://farmvantara.com/shop.html">
    <meta property="og:title" content="Shop Fresh Farm Produce Online | Farm Vantara">
    <meta property="og:description" content="Buy fresh fruits, vegetables, grains, and dairy directly from verified farmers. Farm-to-table delivery.">
    <meta property="og:image" content="https://farmvantara.com/images/shop-fresh-og.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://farmvantara.com/shop.html">
    <meta property="twitter:title" content="Shop Fresh Farm Produce Online | Farm Vantara">
    <meta property="twitter:description" content="Buy fresh fruits, vegetables, grains, and dairy directly from verified farmers.">
    <meta property="twitter:image" content="https://farmvantara.com/images/shop-fresh-twitter.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://farmvantara.com/shop.html">
    
    <!-- Hreflang Tags for Multi-language -->
    <link rel="alternate" hreflang="en" href="https://farmvantara.com/shop.html">
    <link rel="alternate" hreflang="en-US" href="https://farmvantara.com/shop.html">
    <link rel="alternate" hreflang="en-IN" href="https://farmvantara.com/shop.html">
    <link rel="alternate" hreflang="hi" href="https://farmvantara.com/hi/shop.html">
    <link rel="alternate" hreflang="x-default" href="https://farmvantara.com/shop.html">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Shop Fresh Farm Produce",
      "description": "Online marketplace for fresh farm produce directly from farmers",
      "url": "https://farmvantara.com/shop.html",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://farmvantara.com/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Shop Fresh",
            "item": "https://farmvantara.com/shop.html"
          }
        ]
      }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Critical CSS (Inlined for optimal delivery) -->
    <style>
        /* Critical CSS Variables and Base Styles */
        :root {
            --primary-green: #27ae60;
            --dark-green: #219653;
            --light-green: #6fcf97;
            --accent-yellow: #f2c94c;
            --accent-orange: #f2994a;
            --dark-blue: #2d3436;
            --light-gray: #f8f9fa;
            --medium-gray: #dfe6e9;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--white);
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        /* Ensure content is visible while CSS loads */
        .shop-header, main, footer {
            opacity: 1;
            visibility: visible;
        }

        /* Loading skeleton animations */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
    
    <!-- Preload important resources -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Open+Sans:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Non-critical CSS (Loaded asynchronously) -->
    <noscript>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    </noscript>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading fresh produce...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="shop-header">
        <div class="container">
            <nav class="shop-navbar">
                <a href="index.html" class="shop-logo">
                    <img src="./logo.png" alt="Farm Vantara" class="shop-logo-img" loading="lazy">
                    <div class="logo-text">
                        <h1>Shop Fresh</h1>
                        <p>Farm-to-Table Marketplace</p>
                    </div>
                </a>
                
                <div class="shop-actions">
                    <div class="user-actions">
                        <a href="index.html" class="home-link" aria-label="Go to homepage">
                            <i class="fas fa-home"></i>
                        </a>
                        <a href="wishlist.html" class="wishlist-icon" id="wishlistIcon" aria-label="Wishlist">
                            <i class="fas fa-heart"></i>
                            <span class="wishlist-count">0</span>
                        </a>
                        <a href="compare.html" class="compare-icon" id="compareIcon" aria-label="Compare products">
                            <i class="fas fa-balance-scale"></i>
                            <span class="compare-count">0</span>
                        </a>
                        <div class="cart-icon" id="cartIcon" aria-label="Shopping cart">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">3</span>
                        </div>
                        <div class="user-profile">
                            <div class="user-avatar">SK</div>
                            <span class="user-name">Welcome, Customer</span>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="shop-hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1 class="hero-title">Fresh Farm Produce Direct to Your Doorstep</h1>
                        <p class="hero-subtitle">
                            Shop directly from verified farmers across India. Get the freshest fruits, vegetables, grains, and dairy products delivered to your home. No middlemen, better prices, and guaranteed quality.
                        </p>
                        <div class="hero-stats">
                            <div class="stat">
                                <span class="stat-number">500+</span>
                                <span class="stat-label">Farmers Online</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">1000+</span>
                                <span class="stat-label">Products Available</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">50+</span>
                                <span class="stat-label">Cities Served</span>
                            </div>
                        </div>
                    </div>
                    <div class="hero-image">
                        <img 
                            src="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                            srcset="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80 400w,
                                    https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80 800w,
                                    https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80 1200w"
                            sizes="(max-width: 768px) 100vw, 50vw"
                            alt="Fresh vegetables and fruits" 
                            loading="lazy">
                    </div>
                </div>
            </div>
        </section>

        <!-- Search & Filter Section -->
        <section class="search-section">
            <div class="container">
                <div class="search-container">
                    <form class="search-box" id="searchForm">
                        <input type="text" class="search-input" placeholder="Search for vegetables, fruits, grains, dairy..." 
                        aria-label="Search products" required>
                        <i class="fas fa-search search-icon"></i>
                        <div class="search-error" id="searchError"></div>
                    </form>
                    
                    <button class="filter-btn" id="filterBtn" aria-label="Filter products">
                        <i class="fas fa-filter"></i>
                        Filter
                        <span class="filter-count">0</span>
                    </button>
                    
                    <div class="location-selector">
                        <button class="location-btn" id="locationBtn" aria-label="Set delivery location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span id="currentLocation">Select Location</span>
                        </button>
                        <div class="delivery-time-selector" id="deliveryTimeSelector">
                            <select class="time-select" aria-label="Select delivery time">
                                <option value="">Delivery Time</option>
                                <option value="morning">Morning (8AM-12PM)</option>
                                <option value="afternoon">Afternoon (12PM-4PM)</option>
                                <option value="evening">Evening (4PM-8PM)</option>
                                <option value="next-day">Next Day</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Filters Panel -->
                <div class="advanced-filters" id="advancedFilters">
                    <div class="filter-header">
                        <h3>Filter Products</h3>
                        <button class="close-filters" id="closeFilters">&times;</button>
                    </div>
                    <div class="filter-groups">
                        <div class="filter-group">
                            <h4>Category</h4>
                            <div class="filter-options">
                                <label class="filter-option">
                                    <input type="checkbox" name="category" value="vegetables">
                                    Vegetables
                                </label>
                                <label class="filter-option">
                                    <input type="checkbox" name="category" value="fruits">
                                    Fruits
                                </label>
                                <label class="filter-option">
                                    <input type="checkbox" name="category" value="grains">
                                    Grains
                                </label>
                                <label class="filter-option">
                                    <input type="checkbox" name="category" value="dairy">
                                    Dairy
                                </label>
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <h4>Price Range</h4>
                            <div class="price-slider">
                                <input type="range" class="price-range" min="0" max="1000" value="0" id="priceMin">
                                <input type="range" class="price-range" min="0" max="1000" value="1000" id="priceMax">
                                <div class="price-values">
                                    <span id="minPriceValue">₹0</span> - <span id="maxPriceValue">₹1000</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <h4>Certifications</h4>
                            <div class="filter-options">
                                <label class="filter-option">
                                    <input type="checkbox" name="certification" value="organic">
                                    Organic
                                </label>
                                <label class="filter-option">
                                    <input type="checkbox" name="certification" value="non-gmo">
                                    Non-GMO
                                </label>
                                <label class="filter-option">
                                    <input type="checkbox" name="certification" value="pesticide-free">
                                    Pesticide Free
                                </label>
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <h4>Rating</h4>
                            <div class="filter-options">
                                <label class="filter-option">
                                    <input type="radio" name="rating" value="4">
                                    4+ Stars & Above
                                </label>
                                <label class="filter-option">
                                    <input type="radio" name="rating" value="3">
                                    3+ Stars & Above
                                </label>
                                <label class="filter-option">
                                    <input type="radio" name="rating" value="0">
                                    All Ratings
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="btn-clear-filters" id="clearFilters">Clear All</button>
                        <button class="btn-apply-filters" id="applyFilters">Apply Filters</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="categories-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Shop by Category</h2>
                    <p class="section-subtitle">Browse fresh produce from our verified farmers</p>
                </div>
                <div class="categories-grid">
                    <div class="category-card">
                        <div class="category-image">
                            <img 
                                src="https://images.unsplash.com/photo-1592924357228-91a4daadcfea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                srcset="https://images.unsplash.com/photo-1592924357228-91a4daadcfea?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80 400w,
                                        https://images.unsplash.com/photo-1592924357228-91a4daadcfea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80 800w"
                                sizes="(max-width: 768px) 100vw, 50vw"
                                alt="Fresh Vegetables" 
                                loading="lazy">
                        </div>
                        <div class="category-content">
                            <div class="category-icon">
                                <i class="fas fa-carrot"></i>
                            </div>
                            <h3 class="category-title">Vegetables</h3>
                            <p class="category-count">250+ Products</p>
                        </div>
                    </div>
                    <div class="category-card">
                        <div class="category-image">
                            <img 
                                src="https://images.unsplash.com/photo-1610832958506-aa56368176cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                srcset="https://images.unsplash.com/photo-1610832958506-aa56368176cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80 400w,
                                        https://images.unsplash.com/photo-1610832958506-aa56368176cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80 800w"
                                sizes="(max-width: 768px) 100vw, 50vw"
                                alt="Fresh Fruits" 
                                loading="lazy">
                        </div>
                        <div class="category-content">
                            <div class="category-icon">
                                <i class="fas fa-apple-alt"></i>
                            </div>
                            <h3 class="category-title">Fruits</h3>
                            <p class="category-count">180+ Products</p>
                        </div>
                    </div>
                    <div class="category-card">
                        <div class="category-image">
                            <img 
                                src="https://images.unsplash.com/photo-1596040033221-a3824e6c4e0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                srcset="https://images.unsplash.com/photo-1596040033221-a3824e6c4e0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80 400w,
                                        https://images.unsplash.com/photo-1596040033221-a3824e6c4e0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80 800w"
                                sizes="(max-width: 768px) 100vw, 50vw"
                                alt="Grains & Pulses" 
                                loading="lazy">
                        </div>
                        <div class="category-content">
                            <div class="category-icon">
                                <i class="fas fa-wheat-awn"></i>
                            </div>
                            <h3 class="category-title">Grains & Pulses</h3>
                            <p class="category-count">120+ Products</p>
                        </div>
                    </div>
                    <div class="category-card">
                        <div class="category-image">
                            <img 
                                src="https://images.unsplash.com/photo-1628088062854-d1870b4553da?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                srcset="https://images.unsplash.com/photo-1628088062854-d1870b4553da?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80 400w,
                                        https://images.unsplash.com/photo-1628088062854-d1870b4553da?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80 800w"
                                sizes="(max-width: 768px) 100vw, 50vw"
                                alt="Dairy Products" 
                                loading="lazy">
                        </div>
                        <div class="category-content">
                            <div class="category-icon">
                                <i class="fas fa-egg"></i>
                            </div>
                            <h3 class="category-title">Dairy & Eggs</h3>
                            <p class="category-count">80+ Products</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Grid Section -->
        <section class="products-section">
            <div class="container">
                <div class="products-header">
                    <h2 class="products-title">Fresh from the Farm</h2>
                    <div class="sort-options">
                        <select class="sort-select" id="sortSelect" aria-label="Sort products">
                            <option value="featured">Featured</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="rating">Customer Rating</option>
                            <option value="newest">Newest First</option>
                        </select>
                        <div class="view-toggle">
                            <button class="view-btn active" id="gridView" aria-label="Grid view">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" id="listView" aria-label="List view">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="products-loading" id="productsLoading">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading products...</p>
                    </div>
                </div>
                
                <div class="products-grid" id="productsGrid">
                    <!-- Products will be loaded here dynamically -->
                </div>
                
                <!-- Pagination -->
                <div class="pagination" id="pagination">
                    <!-- Pagination will be loaded here dynamically -->
                </div>
            </div>
        </section>

        <!-- Compare Products Modal -->
        <div class="compare-modal" id="compareModal">
            <div class="compare-modal-content">
                <div class="compare-header">
                    <h3>Compare Products</h3>
                    <button class="close-compare" id="closeCompare">&times;</button>
                </div>
                <div class="compare-table" id="compareTable">
                    <!-- Comparison table will be loaded here -->
                </div>
                <div class="compare-actions">
                    <button class="btn-clear-compare" id="clearCompare">Clear All</button>
                    <button class="btn-close-compare" id="closeCompareBtn">Close</button>
                </div>
            </div>
        </div>

        <!-- Featured Farmers Section -->
        <section class="farmers-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Meet Our Featured Farmers</h2>
                    <p class="section-subtitle">Buy directly from these trusted farmers</p>
                </div>
                <div class="farmers-slider" id="farmersSlider">
                    <!-- Farmers will be loaded here dynamically -->
                </div>
            </div>
        </section>

        <!-- Delivery Info Section -->
        <section class="delivery-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">How It Works</h2>
                    <p class="section-subtitle">Simple steps to get farm-fresh produce</p>
                </div>
                <div class="delivery-cards">
                    <div class="delivery-card">
                        <div class="delivery-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3 class="delivery-title">Browse & Select</h3>
                        <p class="delivery-text">Choose from fresh produce listed by verified farmers across India</p>
                    </div>
                    <div class="delivery-card">
                        <div class="delivery-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3 class="delivery-title">Add to Cart</h3>
                        <p class="delivery-text">Select quantities and add items to your cart. Minimum order: ₹299</p>
                    </div>
                    <div class="delivery-card">
                        <div class="delivery-icon">
                            <i class="fas fa-truck"></i>
                        </div>
                        <h3 class="deliverytitle">Fast Delivery</h3>
                        <p class="delivery-text">Get your order delivered in 24-48 hours. Same-day delivery in select cities</p>
                    </div>
                    <div class="delivery-card">
                        <div class="delivery-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="delivery-title">Enjoy Freshness</h3>
                        <p class="delivery-text">Receive farm-fresh produce with quality guarantee. 100% satisfaction or money back</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <div class="close-cart" id="closeCart">&times;</div>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be loaded here dynamically -->
        </div>
        <div class="cart-footer">
            <!-- Order Summary -->
            <div class="order-summary" id="orderSummary">
                <div class="summary-item">
                    <span>Subtotal:</span>
                    <span class="subtotal-amount">₹0.00</span>
                </div>
                <div class="summary-item">
                    <span>Delivery:</span>
                    <span class="delivery-amount">₹0.00</span>
                </div>
                <div class="summary-item discount-item">
                    <span>Discount:</span>
                    <span class="discount-amount">-₹0.00</span>
                </div>
                <div class="summary-total">
                    <span>Total:</span>
                    <span class="total-amount">₹0.00</span>
                </div>
            </div>
            
            <!-- Delivery Time Selection -->
            <div class="delivery-time-cart">
                <label for="cartDeliveryTime">Delivery Time:</label>
                <select id="cartDeliveryTime" class="cart-time-select">
                    <option value="">Select Time Slot</option>
                    <option value="morning">Morning (8AM-12PM)</option>
                    <option value="afternoon">Afternoon (12PM-4PM)</option>
                    <option value="evening">Evening (4PM-8PM)</option>
                    <option value="next-day">Next Day</option>
                </select>
            </div>
            
            <!-- Checkout Button -->
            <button class="btn-checkout" id="checkoutBtn">
                <i class="fas fa-lock"></i>
                Proceed to Checkout
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="shop-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <img src="./logo.png" alt="Farm Vantara" class="footer-logo" loading="lazy">
                    <p class="footer-description">
                        India's leading farm-to-table marketplace connecting consumers directly with verified farmers. Fresh produce, fair prices, and fast delivery.
                    </p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="farmers.html"><i class="fas fa-chevron-right"></i> For Farmers</a></li>
                        <li><a href="business.html"><i class="fas fa-chevron-right"></i> For Business</a></li>
                        <li><a href="contact.html"><i class="fas fa-chevron-right"></i> Contact Us</a></li>
                        <li><a href="about.html"><i class="fas fa-chevron-right"></i> About Us</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3 class="footer-title">Customer Support</h3>
                    <ul class="footer-links">
                        <li><a href="faq.html"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                        <li><a href="shipping.html"><i class="fas fa-chevron-right"></i> Shipping Policy</a></li>
                        <li><a href="returns.html"><i class="fas fa-chevron-right"></i> Returns & Refunds</a></li>
                        <li><a href="privacy.html"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                        <li><a href="terms.html"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3 class="footer-title">Contact Info</h3>
                    <ul class="footer-links">
                        <li><a href="tel:18001234567"><i class="fas fa-phone"></i> 1800-123-4567</a></li>
                        <li><a href="mailto:support@farmvantara.com"><i class="fas fa-envelope"></i> support@farmvantara.com</a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> AgriTech Park, Noida, UP</a></li>
                        <li><a href="https://wa.me/919553774933"><i class="fab fa-whatsapp"></i> WhatsApp Support</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Farm Vantara. All rights reserved. | Udyam Registration No: UDYAM-UP-03-1234567</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top" id="backToTop" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Non-critical CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    
    <style>
        /* CSS Variables */
        :root {
            --primary-green: #27ae60;
            --dark-green: #219653;
            --light-green: #6fcf97;
            --accent-yellow: #f2c94c;
            --accent-orange: #f2994a;
            --dark-blue: #2d3436;
            --light-gray: #f8f9fa;
            --medium-gray: #dfe6e9;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.12);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            --gradient-primary: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            --gradient-yellow: linear-gradient(135deg, #f2c94c 0%, #f2994a 100%);
            --gradient-orange: linear-gradient(135deg, #f2994a 0%, #eb5757 100%);
        }

        /* Breadcrumb Navigation */
        .breadcrumb {
            background: var(--light-gray);
            padding: 15px 0;
            border-bottom: 1px solid var(--medium-gray);
        }

        .breadcrumb-list {
            display: flex;
            list-style: none;
            gap: 10px;
            align-items: center;
        }

        .breadcrumb-item {
            font-size: 14px;
            color: var(--text-light);
        }

        .breadcrumb-item a {
            color: var(--primary-green);
            text-decoration: none;
            transition: var(--transition);
        }

        .breadcrumb-item a:hover {
            color: var(--dark-green);
            text-decoration: underline;
        }

        .breadcrumb-item:not(:last-child)::after {
            content: '›';
            margin-left: 10px;
            color: var(--text-light);
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            text-align: center;
        }

        .loading-spinner .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--light-gray);
            border-top: 4px solid var(--primary-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-spinner p {
            color: var(--text-dark);
            font-weight: 500;
        }

        /* Wishlist and Compare Icons */
        .wishlist-icon, .compare-icon {
            position: relative;
            font-size: 22px;
            color: var(--text-dark);
        }

        .wishlist-count, .compare-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--gradient-orange);
            color: white;
            font-size: 12px;
            font-weight: 700;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Enhanced Search & Filter Section */
        .location-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .delivery-time-selector {
            display: none;
        }

        .delivery-time-selector.active {
            display: block;
        }

        .time-select {
            padding: 12px 20px;
            border: 2px solid var(--medium-gray);
            border-radius: 10px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .filter-count {
            background: var(--primary-green);
            color: white;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 5px;
        }

        /* Advanced Filters */
        .advanced-filters {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -10px 0 40px rgba(0, 0, 0, 0.1);
            z-index: 2001;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .advanced-filters.active {
            right: 0;
        }

        .filter-header {
            padding: 25px;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .filter-header h3 {
            font-size: 1.3rem;
            color: var(--text-dark);
        }

        .close-filters {
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            background: none;
            border: none;
        }

        .filter-groups {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
        }

        .filter-group {
            margin-bottom: 30px;
        }

        .filter-group h4 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            color: var(--text-dark);
        }

        .filter-option input[type="checkbox"],
        .filter-option input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-green);
        }

        .price-slider {
            padding: 20px 0;
        }

        .price-range {
            width: 100%;
            height: 4px;
            margin: 10px 0;
            -webkit-appearance: none;
            appearance: none;
            background: var(--medium-gray);
            border-radius: 2px;
            outline: none;
        }

        .price-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary-green);
            border-radius: 50%;
            cursor: pointer;
        }

        .price-values {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .filter-actions {
            padding: 25px;
            border-top: 1px solid var(--medium-gray);
            display: flex;
            gap: 15px;
        }

        .btn-clear-filters, .btn-apply-filters {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transition);
        }

        .btn-clear-filters {
            background: white;
            border: 2px solid var(--medium-gray);
            color: var(--text-dark);
        }

        .btn-apply-filters {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-apply-filters:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.2);
        }

        /* Products Loading State */
        .products-loading {
            text-align: center;
            padding: 60px 0;
            display: none;
        }

        .products-loading.active {
            display: block;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 50px;
            gap: 10px;
        }

        .pagination-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            color: var(--text-dark);
            cursor: pointer;
            transition: var(--transition);
        }

        .pagination-btn:hover:not(.disabled) {
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .pagination-btn.active {
            background: var(--gradient-primary);
            border-color: var(--primary-green);
            color: white;
        }

        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-dots {
            color: var(--text-light);
            padding: 0 10px;
        }

        /* Compare Modal */
        .compare-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
        }

        .compare-modal.active {
            display: flex;
        }

        .compare-modal-content {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 1200px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .compare-header {
            padding: 25px;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .compare-header h3 {
            font-size: 1.5rem;
            color: var(--text-dark);
        }

        .close-compare {
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            background: none;
            border: none;
        }

        .compare-table {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        .compare-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .compare-table th,
        .compare-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--medium-gray);
        }

        .compare-table th {
            background: var(--light-gray);
            font-weight: 600;
            color: var(--text-dark);
        }

        .compare-actions {
            padding: 25px;
            border-top: 1px solid var(--medium-gray);
            display: flex;
            gap: 15px;
        }

        .btn-clear-compare,
        .btn-close-compare {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transition);
        }

        .btn-clear-compare {
            background: white;
            border: 2px solid var(--medium-gray);
            color: var(--text-dark);
        }

        .btn-close-compare {
            background: var(--gradient-primary);
            color: white;
        }

        /* Enhanced Order Summary */
        .order-summary {
            padding: 20px 0;
            border-top: 1px solid var(--medium-gray);
            border-bottom: 1px solid var(--medium-gray);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .summary-item.discount-item {
            color: var(--primary-green);
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--medium-gray);
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-dark);
        }

        .delivery-time-cart {
            padding: 20px 0;
        }

        .delivery-time-cart label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .cart-time-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--medium-gray);
            border-radius: 10px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        /* Form Validation Styles */
        .search-error {
            color: #eb5757;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .search-error.active {
            display: block;
        }

        .search-input.error {
            border-color: #eb5757;
        }

        /* Wishlist Persistence Indicator */
        .wishlist-saved {
            color: #eb5757;
        }

        .wishlist-saved i {
            animation: heartBeat 0.5s ease;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Rest of the original CSS remains the same */
        /* ... (previous CSS code continues) ... */

        h1, h2, h3, h4, h5 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            line-height: 1.3;
        }

        section {
            padding: 80px 0;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            cursor: pointer;
            border: none;
            font-family: inherit;
        }

        /* Header */
        .shop-header {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .shop-navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .shop-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .shop-logo-img {
            height: 60px;
            width: auto;
        }

        .logo-text h1 {
            font-size: 24px;
            color: var(--dark-green);
            margin-bottom: 5px;
        }

        .logo-text p {
            font-size: 12px;
            color: var(--text-light);
            letter-spacing: 1px;
        }

        .shop-actions {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .cart-icon {
            position: relative;
            font-size: 22px;
            color: var(--dark-green);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--gradient-orange);
            color: white;
            font-size: 12px;
            font-weight: 700;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: white;
            border-radius: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .user-profile:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Shop Hero Section */
        .shop-hero {
            background: linear-gradient(135deg, #f8fff9 0%, #e8f5e9 100%);
            padding: 60px 0;
        }

        .hero-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 50px;
        }

        .hero-text {
            flex: 1;
        }

        .hero-title {
            font-size: 3.2rem;
            color: var(--dark-green);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .hero-stats {
            display: flex;
            gap: 40px;
            margin-top: 40px;
        }

        .stat {
            display: flex;
            flex-direction: column;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-green);
            line-height: 1;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-light);
            margin-top: 10px;
            font-weight: 600;
        }

        .hero-image {
            flex: 1;
            position: relative;
        }

        .hero-image img {
            border-radius: 20px;
            box-shadow: var(--shadow-hover);
            transform: perspective(1000px) rotateY(-10deg);
            transition: var(--transition);
        }

        .hero-image:hover img {
            transform: perspective(1000px) rotateY(0deg);
        }

        /* Search & Filter Section */
        .search-section {
            background: white;
            padding: 40px 0;
            border-bottom: 1px solid var(--medium-gray);
        }

        .search-container {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 16px 50px 16px 20px;
            border: 2px solid var(--medium-gray);
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 20px;
        }

        .filter-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 16px 30px;
            background: white;
            border: 2px solid var(--medium-gray);
            border-radius: 12px;
            font-weight: 600;
            color: var(--text-dark);
            transition: var(--transition);
        }

        .filter-btn:hover {
            border-color: var(--primary-green);
            background: rgba(39, 174, 96, 0.05);
        }

        .location-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 16px 30px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 12px;
            font-weight: 600;
            transition: var(--transition);
        }

        .location-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.2);
        }

        /* Categories Section */
        .categories-section {
            background: var(--light-gray);
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 2.5rem;
            color: var(--text-dark);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: var(--text-light);
            max-width: 700px;
            margin: 0 auto;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .category-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .category-image {
            height: 200px;
            overflow: hidden;
        }

        .category-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .category-card:hover .category-image img {
            transform: scale(1.1);
        }

        .category-content {
            padding: 25px;
            text-align: center;
        }

        .category-icon {
            width: 60px;
            height: 60px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: -45px auto 20px;
            position: relative;
            z-index: 1;
        }

        .category-icon i {
            font-size: 24px;
            color: var(--primary-green);
        }

        .category-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .category-count {
            color: var(--text-light);
            font-size: 14px;
            font-weight: 600;
        }

        /* Products Grid Section */
        .products-section {
            background: white;
        }

        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .products-title {
            font-size: 2rem;
            color: var(--text-dark);
        }

        .sort-options {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sort-select {
            padding: 12px 20px;
            border: 2px solid var(--medium-gray);
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-dark);
            background: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        .view-toggle {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            color: var(--text-light);
            transition: var(--transition);
        }

        .view-btn.active {
            background: var(--primary-green);
            border-color: var(--primary-green);
            color: white;
        }

        .view-btn:hover:not(.active) {
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .product-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .product-badges {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .badge-organic {
            background: var(--gradient-primary);
            color: white;
        }

        .badge-seasonal {
            background: var(--gradient-yellow);
            color: white;
        }

        .badge-discount {
            background: var(--gradient-orange);
            color: white;
        }

        .product-image {
            height: 220px;
            overflow: hidden;
            position: relative;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-content {
            padding: 25px;
        }

        .product-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .product-farmer {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--text-light);
            font-size: 14px;
        }

        .farmer-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .rating-stars {
            color: var(--accent-yellow);
        }

        .rating-count {
            color: var(--text-light);
            font-size: 14px;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .current-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-green);
        }

        .original-price {
            font-size: 1rem;
            color: var(--text-light);
            text-decoration: line-through;
        }

        .per-unit {
            font-size: 14px;
            color: var(--text-light);
        }

        .product-stock {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .stock-status {
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .stock-in {
            background: rgba(39, 174, 96, 0.1);
            color: var(--primary-green);
        }

        .stock-low {
            background: rgba(242, 153, 74, 0.1);
            color: var(--accent-orange);
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .btn-add-to-cart {
            flex: 1;
            padding: 12px 20px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
        }

        .btn-add-to-cart:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.2);
        }

        .btn-wishlist {
            width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid var(--medium-gray);
            border-radius: 10px;
            color: var(--text-light);
            transition: var(--transition);
        }

        .btn-wishlist:hover {
            border-color: #eb5757;
            color: #eb5757;
        }

        .btn-wishlist.active {
            background: #eb5757;
            border-color: #eb5757;
            color: white;
        }

        /* Featured Farmers Section */
        .farmers-section {
            background: var(--light-gray);
        }

        .farmers-slider {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .farmer-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .farmer-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .farmer-header {
            padding: 30px 30px 20px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .farmer-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid var(--primary-green);
        }

        .farmer-avatar-large img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .farmer-info h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .farmer-location {
            color: var(--text-light);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 10px;
        }

        .farmer-rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .farmer-products {
            padding: 0 30px 30px;
        }

        .farmer-products h4 {
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .product-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .product-tag {
            padding: 6px 15px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 20px;
            font-size: 14px;
            color: var(--primary-green);
            font-weight: 600;
        }

        .farmer-actions {
            padding: 20px 30px;
            border-top: 1px solid var(--medium-gray);
            display: flex;
            gap: 10px;
        }

        .btn-view-farm {
            flex: 1;
            padding: 12px;
            background: white;
            border: 2px solid var(--primary-green);
            color: var(--primary-green);
            border-radius: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
        }

        .btn-view-farm:hover {
            background: var(--gradient-primary);
            color: white;
        }

        /* Delivery Info Section */
        .delivery-section {
            background: white;
        }

        .delivery-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .delivery-card {
            padding: 40px 30px;
            background: var(--light-gray);
            border-radius: 20px;
            text-align: center;
            transition: var(--transition);
        }

        .delivery-card:hover {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-10px);
        }

        .delivery-card:hover .delivery-icon,
        .delivery-card:hover .delivery-title,
        .delivery-card:hover .delivery-text {
            color: white;
        }

        .delivery-icon {
            font-size: 40px;
            color: var(--primary-green);
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .delivery-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-dark);
            transition: var(--transition);
        }

        .delivery-text {
            color: var(--text-light);
            transition: var(--transition);
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -10px 0 40px rgba(0, 0, 0, 0.1);
            z-index: 2000;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 30px;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h2 {
            font-size: 1.5rem;
            color: var(--text-dark);
        }

        .close-cart {
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition);
        }

        .close-cart:hover {
            color: var(--text-dark);
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            padding: 20px 0;
            border-bottom: 1px solid var(--medium-gray);
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            overflow: hidden;
        }

        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-farmer {
            font-size: 12px;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .cart-item-price {
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--light-gray);
            border-radius: 20px;
            padding: 5px 15px;
        }

        .quantity-btn {
            background: none;
            border: none;
            font-size: 18px;
            color: var(--text-dark);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }

        .remove-item {
            color: #eb5757;
            font-size: 18px;
            cursor: pointer;
            transition: var(--transition);
        }

        .remove-item:hover {
            transform: scale(1.2);
        }

        .cart-footer {
            padding: 30px;
            border-top: 1px solid var(--medium-gray);
            background: white;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .cart-total-amount {
            color: var(--primary-green);
        }

        .btn-checkout {
            width: 100%;
            padding: 18px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
        }

        .btn-checkout:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.2);
        }

        .cart-empty {
            text-align: center;
            padding: 60px 30px;
        }

        .cart-empty-icon {
            font-size: 60px;
            color: var(--medium-gray);
            margin-bottom: 20px;
        }

        .cart-empty h3 {
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .cart-empty p {
            color: var(--text-light);
            margin-bottom: 30px;
        }

        /* Footer */
        .shop-footer {
            background: var(--dark-blue);
            color: white;
            padding: 60px 0 30px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-logo img {
            height: 70px;
            margin-bottom: 20px;
        }

        .footer-description {
            color: #ffffff;
            opacity: 0.8;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary-green);
            transform: translateY(-3px);
        }

        .footer-title {
            font-size: 1.2rem;
            margin-bottom: 25px;
            color: white;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--gradient-primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 15px;
        }

        .footer-links a {
            color: #ffffff;
            opacity: 0.8;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-links a:hover {
            opacity: 1;
            padding-left: 10px;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 30px;
            text-align: center;
            color: #ffffff;
            opacity: 0.7;
            font-size: 14px;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 1000;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(39, 174, 96, 0.4);
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .container {
                max-width: 1140px;
            }
            
            .hero-title {
                font-size: 2.8rem;
            }
        }

        @media (max-width: 992px) {
            .hero-content {
                flex-direction: column;
                text-align: center;
            }
            
            .hero-stats {
                justify-content: center;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .cart-sidebar {
                width: 350px;
            }
            
            .advanced-filters {
                width: 350px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 20px;
            }
            
            section {
                padding: 60px 0;
            }
            
            .hero-title {
                font-size: 2.2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .products-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .advanced-filters {
                width: 100%;
                right: -100%;
            }
            
            .user-actions {
                gap: 15px;
            }
            
            .user-name {
                display: none;
            }
            
            .location-selector {
                flex-direction: column;
                width: 100%;
            }
            
            .delivery-time-selector {
                width: 100%;
            }
            
            .time-select {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .hero-title {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.6rem;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .farmer-header {
                flex-direction: column;
                text-align: center;
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .btn-wishlist {
                width: 100%;
            }
            
            .filter-actions {
                flex-direction: column;
            }
            
            .compare-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- JavaScript -->
    <script>
        // Enhanced Product Data with more entries for pagination
        const products = [
            {
                id: 1,
                name: "Organic Tomatoes",
                farmer: "Rajesh Kumar",
                farmerId: "FK001",
                category: "vegetables",
                image: "https://images.unsplash.com/photo-1592924357228-91a4daadcfea?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 45,
                originalPrice: 55,
                unit: "kg",
                rating: 4.5,
                reviews: 128,
                stock: "in-stock",
                badges: ["organic", "seasonal"],
                description: "Fresh organic tomatoes grown without pesticides",
                certification: ["organic", "pesticide-free"],
                location: "Punjab"
            },
            {
                id: 2,
                name: "Alphonso Mangoes",
                farmer: "Priya Sharma",
                farmerId: "FK002",
                category: "fruits",
                image: "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 320,
                originalPrice: 380,
                unit: "dozen",
                rating: 4.8,
                reviews: 256,
                stock: "in-stock",
                badges: ["organic", "seasonal"],
                description: "Premium Alphonso mangoes from Maharashtra",
                certification: ["organic"],
                location: "Maharashtra"
            },
            {
                id: 3,
                name: "Basmati Rice",
                farmer: "Arun Patel",
                farmerId: "FK003",
                category: "grains",
                image: "https://images.unsplash.com/photo-1596040033221-a3824e6c4e0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 120,
                originalPrice: null,
                unit: "kg",
                rating: 4.7,
                reviews: 189,
                stock: "in-stock",
                badges: [],
                description: "Premium quality basmati rice, aged for 1 year",
                certification: ["non-gmo"],
                location: "Gujarat"
            },
            {
                id: 4,
                name: "Fresh Cow Milk",
                farmer: "Sunil Verma",
                farmerId: "FK004",
                category: "dairy",
                image: "https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 60,
                originalPrice: 65,
                unit: "liter",
                rating: 4.6,
                reviews: 342,
                stock: "low-stock",
                badges: ["organic"],
                description: "Fresh pasteurized cow milk, delivered daily",
                certification: ["organic"],
                location: "Uttar Pradesh"
            },
            {
                id: 5,
                name: "Broccoli",
                farmer: "Meena Singh",
                farmerId: "FK005",
                category: "vegetables",
                image: "https://images.unsplash.com/photo-1583182332415-7a8b9e6b32c6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 85,
                originalPrice: 95,
                unit: "kg",
                rating: 4.4,
                reviews: 96,
                stock: "in-stock",
                badges: ["organic"],
                description: "Fresh broccoli, rich in nutrients",
                certification: ["organic", "pesticide-free"],
                location: "Himachal Pradesh"
            },
            {
                id: 6,
                name: "Strawberries",
                farmer: "Kiran Reddy",
                farmerId: "FK006",
                category: "fruits",
                image: "https://images.unsplash.com/photo-1464965911861-746a04b4bca6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 180,
                originalPrice: 220,
                unit: "250g pack",
                rating: 4.9,
                reviews: 178,
                stock: "in-stock",
                badges: ["organic", "seasonal", "discount"],
                description: "Sweet and juicy strawberries, hand-picked",
                certification: ["organic"],
                location: "Karnataka"
            },
            {
                id: 7,
                name: "Organic Eggs",
                farmer: "Vikram Singh",
                farmerId: "FK007",
                category: "dairy",
                image: "https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 120,
                originalPrice: null,
                unit: "dozen",
                rating: 4.7,
                reviews: 234,
                stock: "in-stock",
                badges: ["organic"],
                description: "Free-range organic eggs from happy chickens",
                certification: ["organic"],
                location: "Punjab"
            },
            {
                id: 8,
                name: "Baby Potatoes",
                farmer: "Ramesh Iyer",
                farmerId: "FK008",
                category: "vegetables",
                image: "https://images.unsplash.com/photo-1518977676601-b53f82aba655?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 35,
                originalPrice: 40,
                unit: "kg",
                rating: 4.3,
                reviews: 87,
                stock: "in-stock",
                badges: ["organic"],
                description: "Fresh baby potatoes, perfect for curries",
                certification: ["organic"],
                location: "Tamil Nadu"
            },
            // Additional products for pagination
            {
                id: 9,
                name: "Carrots",
                farmer: "Sanjay Verma",
                farmerId: "FK009",
                category: "vegetables",
                image: "https://images.unsplash.com/photo-1598170845058-78132e1b46d0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 40,
                originalPrice: 45,
                unit: "kg",
                rating: 4.2,
                reviews: 95,
                stock: "in-stock",
                badges: ["organic"],
                description: "Fresh organic carrots",
                certification: ["organic"],
                location: "Haryana"
            },
            {
                id: 10,
                name: "Apples",
                farmer: "Anita Desai",
                farmerId: "FK010",
                category: "fruits",
                image: "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 150,
                originalPrice: 180,
                unit: "kg",
                rating: 4.6,
                reviews: 210,
                stock: "in-stock",
                badges: ["organic"],
                description: "Fresh Kashmiri apples",
                certification: ["organic"],
                location: "Kashmir"
            },
            {
                id: 11,
                name: "Wheat Flour",
                farmer: "Rajeshwari Nair",
                farmerId: "FK011",
                category: "grains",
                image: "https://images.unsplash.com/photo-1596040033221-a3824e6c4e0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 80,
                originalPrice: null,
                unit: "kg",
                rating: 4.5,
                reviews: 145,
                stock: "in-stock",
                badges: [],
                description: "Whole wheat flour",
                certification: ["non-gmo"],
                location: "Madhya Pradesh"
            },
            {
                id: 12,
                name: "Paneer",
                farmer: "Mohan Lal",
                farmerId: "FK012",
                category: "dairy",
                image: "https://images.unsplash.com/photo-1628088062854-d1870b4553da?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 220,
                originalPrice: 250,
                unit: "500g",
                rating: 4.8,
                reviews: 189,
                stock: "in-stock",
                badges: ["organic"],
                description: "Fresh homemade paneer",
                certification: ["organic"],
                location: "Rajasthan"
            }
        ];

        // Farmers Data
        const farmers = [
            {
                id: "FK001",
                name: "Rajesh Kumar",
                location: "Punjab",
                rating: 4.8,
                image: "https://images.unsplash.com/photo-1586773860418-dc22f8b874bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                products: ["Tomatoes", "Potatoes", "Onions", "Cabbage"],
                joined: "2022"
            },
            {
                id: "FK002",
                name: "Priya Sharma",
                location: "Maharashtra",
                rating: 4.9,
                image: "https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                products: ["Mangoes", "Bananas", "Papayas", "Guavas"],
                joined: "2021"
            },
            {
                id: "FK003",
                name: "Arun Patel",
                location: "Gujarat",
                rating: 4.7,
                image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                products: ["Rice", "Wheat", "Corn", "Pulses"],
                joined: "2023"
            }
        ];

        // Cart Data
        let cart = [
            {
                id: 1,
                productId: 1,
                name: "Organic Tomatoes",
                farmer: "Rajesh Kumar",
                image: "https://images.unsplash.com/photo-1592924357228-91a4daadcfea?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 45,
                unit: "kg",
                quantity: 2
            },
            {
                id: 2,
                productId: 4,
                name: "Fresh Cow Milk",
                farmer: "Sunil Verma",
                image: "https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 60,
                unit: "liter",
                quantity: 1
            },
            {
                id: 3,
                productId: 7,
                name: "Organic Eggs",
                farmer: "Vikram Singh",
                image: "https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                price: 120,
                unit: "dozen",
                quantity: 1
            }
        ];

        // Wishlist Data (with localStorage persistence)
        let wishlist = JSON.parse(localStorage.getItem('farmVantaraWishlist')) || [];

        // Compare Data
        let compareList = JSON.parse(localStorage.getItem('farmVantaraCompare')) || [];

        // Filter State
        let currentFilters = {
            categories: [],
            priceRange: [0, 1000],
            certifications: [],
            minRating: 0,
            searchTerm: ''
        };

        // Pagination State
        let currentPage = 1;
        const productsPerPage = 8;

        // DOM Elements
        const productsGrid = document.getElementById('productsGrid');
        const cartIcon = document.getElementById('cartIcon');
        const cartSidebar = document.getElementById('cartSidebar');
        const closeCart = document.getElementById('closeCart');
        const cartItems = document.getElementById('cartItems');
        const cartCount = document.querySelector('.cart-count');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const backToTop = document.getElementById('backToTop');
        const filterBtn = document.getElementById('filterBtn');
        const locationBtn = document.getElementById('locationBtn');
        const searchInput = document.querySelector('.search-input');
        const searchForm = document.getElementById('searchForm');
        const searchError = document.getElementById('searchError');
        const sortSelect = document.getElementById('sortSelect');
        const viewButtons = document.querySelectorAll('.view-btn');
        const advancedFilters = document.getElementById('advancedFilters');
        const closeFilters = document.getElementById('closeFilters');
        const applyFilters = document.getElementById('applyFilters');
        const clearFilters = document.getElementById('clearFilters');
        const wishlistIcon = document.getElementById('wishlistIcon');
        const wishlistCount = document.querySelector('.wishlist-count');
        const compareIcon = document.getElementById('compareIcon');
        const compareCount = document.querySelector('.compare-count');
        const compareModal = document.getElementById('compareModal');
        const closeCompare = document.getElementById('closeCompare');
        const closeCompareBtn = document.getElementById('closeCompareBtn');
        const clearCompare = document.getElementById('clearCompare');
        const compareTable = document.getElementById('compareTable');
        const productsLoading = document.getElementById('productsLoading');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const pagination = document.getElementById('pagination');
        const currentLocation = document.getElementById('currentLocation');
        const deliveryTimeSelector = document.getElementById('deliveryTimeSelector');
        const cartDeliveryTime = document.getElementById('cartDeliveryTime');

        // Initialize
        document.addEventListener('DOMContentLoaded', async function() {
            // Show loading overlay
            loadingOverlay.classList.remove('hidden');
            
            try {
                // Load data and render components
                await Promise.all([
                    renderProducts(),
                    renderFarmers(),
                    renderCart(),
                    updateWishlistCount(),
                    updateCompareCount(),
                    updateCartCount(),
                    updateFilterCount()
                ]);
                
                // Initialize filters
                initializeFilters();
                
                // Setup event listeners
                setupEventListeners();
                
                // Hide loading overlay after everything is loaded
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                }, 500);
                
            } catch (error) {
                console.error('Initialization error:', error);
                showNotification('Error loading page. Please refresh.', 'error');
                loadingOverlay.classList.add('hidden');
            }
        });

        // Setup Event Listeners
        function setupEventListeners() {
            // Cart functionality
            cartIcon.addEventListener('click', toggleCart);
            closeCart.addEventListener('click', toggleCart);
            checkoutBtn.addEventListener('click', proceedToCheckout);
            
            // Search functionality
            searchForm.addEventListener('submit', handleSearch);
            searchInput.addEventListener('input', handleSearchInput);
            sortSelect.addEventListener('change', sortProducts);
            
            // View toggle
            viewButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    viewButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    toggleView(this);
                });
            });
            
            // Back to top
            window.addEventListener('scroll', toggleBackToTop);
            backToTop.addEventListener('click', function(e) {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Filter and location buttons
            filterBtn.addEventListener('click', showFilters);
            closeFilters.addEventListener('click', hideFilters);
            applyFilters.addEventListener('click', applyFilterChanges);
            clearFilters.addEventListener('click', clearAllFilters);
            
            // Location and delivery time
            locationBtn.addEventListener('click', setLocation);
            cartDeliveryTime.addEventListener('change', updateDeliveryTime);
            
            // Wishlist and Compare
            wishlistIcon.addEventListener('click', viewWishlist);
            compareIcon.addEventListener('click', viewCompare);
            closeCompare.addEventListener('click', hideCompare);
            closeCompareBtn.addEventListener('click', hideCompare);
            clearCompare.addEventListener('click', clearCompareList);
            
            // Pagination
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('pagination-btn') && !e.target.classList.contains('disabled')) {
                    const page = parseInt(e.target.dataset.page);
                    if (page) {
                        changePage(page);
                    }
                }
            });
        }

        // Initialize Filters
        function initializeFilters() {
            // Price range sliders
            const priceMin = document.getElementById('priceMin');
            const priceMax = document.getElementById('priceMax');
            const minPriceValue = document.getElementById('minPriceValue');
            const maxPriceValue = document.getElementById('maxPriceValue');
            
            priceMin.value = currentFilters.priceRange[0];
            priceMax.value = currentFilters.priceRange[1];
            minPriceValue.textContent = `₹${priceMin.value}`;
            maxPriceValue.textContent = `₹${priceMax.value}`;
            
            priceMin.addEventListener('input', function() {
                if (parseInt(this.value) > parseInt(priceMax.value)) {
                    this.value = priceMax.value;
                }
                minPriceValue.textContent = `₹${this.value}`;
                currentFilters.priceRange[0] = parseInt(this.value);
            });
            
            priceMax.addEventListener('input', function() {
                if (parseInt(this.value) < parseInt(priceMin.value)) {
                    this.value = priceMin.value;
                }
                maxPriceValue.textContent = `₹${this.value}`;
                currentFilters.priceRange[1] = parseInt(this.value);
            });
            
            // Category checkboxes
            document.querySelectorAll('input[name="category"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateCategoryFilters);
            });
            
            // Certification checkboxes
            document.querySelectorAll('input[name="certification"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateCertificationFilters);
            });
            
            // Rating radios
            document.querySelectorAll('input[name="rating"]').forEach(radio => {
                radio.addEventListener('change', updateRatingFilter);
            });
        }

        // Render Products with Pagination
        async function renderProducts() {
            productsLoading.classList.add('active');
            
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Apply filters
            let filteredProducts = filterProducts(products);
            
            // Apply sorting
            filteredProducts = sortProductsArray(filteredProducts, sortSelect.value);
            
            // Calculate pagination
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            const startIndex = (currentPage - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const currentProducts = filteredProducts.slice(startIndex, endIndex);
            
            // Clear grid
            productsGrid.innerHTML = '';
            
            if (currentProducts.length === 0) {
                productsGrid.innerHTML = `
                    <div class="no-products">
                        <i class="fas fa-seedling"></i>
                        <h3>No products found</h3>
                        <p>Try adjusting your filters or search term</p>
                    </div>
                `;
                productsLoading.classList.remove('active');
                renderPagination(1, 1); // Show single page
                return;
            }
            
            // Render products
            currentProducts.forEach(product => {
                const isInWishlist = wishlist.some(item => item.id === product.id);
                const isInCompare = compareList.some(item => item.id === product.id);
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-badges">
                        ${product.badges.includes('organic') ? '<span class="badge badge-organic">Organic</span>' : ''}
                        ${product.badges.includes('seasonal') ? '<span class="badge badge-seasonal">Seasonal</span>' : ''}
                        ${product.badges.includes('discount') ? '<span class="badge badge-discount">-15%</span>' : ''}
                    </div>
                    <div class="product-image">
                        <img 
                            src="${product.image}" 
                            srcset="${product.image.replace('w=400', 'w=200')} 200w,
                                    ${product.image} 400w"
                            sizes="(max-width: 768px) 100vw, 50vw"
                            alt="${product.name}" 
                            loading="lazy">
                        <button class="compare-toggle ${isInCompare ? 'active' : ''}" 
                                data-id="${product.id}"
                                aria-label="${isInCompare ? 'Remove from comparison' : 'Add to comparison'}">
                            <i class="fas fa-balance-scale"></i>
                        </button>
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">${product.name}</h3>
                        <div class="product-farmer">
                            <div class="farmer-avatar">${product.farmer.charAt(0)}</div>
                            <span>By ${product.farmer}</span>
                        </div>
                        <div class="product-rating">
                            <div class="rating-stars">
                                ${getStarRating(product.rating)}
                            </div>
                            <span class="rating-count">(${product.reviews})</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">₹${product.price}</span>
                            ${product.originalPrice ? `<span class="original-price">₹${product.originalPrice}</span>` : ''}
                            <span class="per-unit">/ ${product.unit}</span>
                        </div>
                        <div class="product-stock">
                            <span class="stock-status ${product.stock === 'in-stock' ? 'stock-in' : 'stock-low'}">
                                ${product.stock === 'in-stock' ? 'In Stock' : 'Low Stock'}
                            </span>
                            <span class="product-location">
                                <i class="fas fa-map-marker-alt"></i> ${product.location}
                            </span>
                        </div>
                        <div class="product-actions">
                            <button class="btn-add-to-cart" data-id="${product.id}" aria-label="Add ${product.name} to cart">
                                <i class="fas fa-cart-plus"></i>
                                Add to Cart
                            </button>
                            <button class="btn-wishlist ${isInWishlist ? 'active wishlist-saved' : ''}" 
                                    data-id="${product.id}"
                                    aria-label="${isInWishlist ? 'Remove from wishlist' : 'Add to wishlist'}">
                                <i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                // Add to cart functionality
                const addToCartBtn = productCard.querySelector('.btn-add-to-cart');
                addToCartBtn.addEventListener('click', function() {
                    addToCart(product.id);
                });
                
                // Wishlist functionality
                const wishlistBtn = productCard.querySelector('.btn-wishlist');
                wishlistBtn.addEventListener('click', function() {
                    toggleWishlist(product.id, product);
                });
                
                // Compare functionality
                const compareToggle = productCard.querySelector('.compare-toggle');
                compareToggle.addEventListener('click', function() {
                    toggleCompare(product.id, product);
                });
                
                productsGrid.appendChild(productCard);
            });
            
            productsLoading.classList.remove('active');
            
            // Render pagination
            renderPagination(currentPage, totalPages);
        }

        // Filter Products
        function filterProducts(productsList) {
            return productsList.filter(product => {
                // Search term filter
                if (currentFilters.searchTerm) {
                    const searchLower = currentFilters.searchTerm.toLowerCase();
                    if (!product.name.toLowerCase().includes(searchLower) && 
                        !product.description.toLowerCase().includes(searchLower) &&
                        !product.farmer.toLowerCase().includes(searchLower)) {
                        return false;
                    }
                }
                
                // Category filter
                if (currentFilters.categories.length > 0 && !currentFilters.categories.includes(product.category)) {
                    return false;
                }
                
                // Price range filter
                if (product.price < currentFilters.priceRange[0] || product.price > currentFilters.priceRange[1]) {
                    return false;
                }
                
                // Certification filter
                if (currentFilters.certifications.length > 0) {
                    const hasCertification = currentFilters.certifications.some(cert => 
                        product.certification.includes(cert)
                    );
                    if (!hasCertification) return false;
                }
                
                // Rating filter
                if (currentFilters.minRating > 0 && product.rating < currentFilters.minRating) {
                    return false;
                }
                
                return true;
            });
        }

        // Sort Products Array
        function sortProductsArray(productsList, sortBy) {
            const sorted = [...productsList];
            
            switch(sortBy) {
                case 'price-low':
                    return sorted.sort((a, b) => a.price - b.price);
                case 'price-high':
                    return sorted.sort((a, b) => b.price - a.price);
                case 'rating':
                    return sorted.sort((a, b) => b.rating - a.rating);
                case 'newest':
                    return sorted.reverse(); // In real app, use actual date
                default:
                    return sorted;
            }
        }

        // Render Pagination
        function renderPagination(current, total) {
            pagination.innerHTML = '';
            
            if (total <= 1) return;
            
            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = `pagination-btn ${current === 1 ? 'disabled' : ''}`;
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevBtn.dataset.page = current - 1;
            prevBtn.disabled = current === 1;
            pagination.appendChild(prevBtn);
            
            // Page numbers
            const maxVisible = 5;
            let startPage = Math.max(1, current - Math.floor(maxVisible / 2));
            let endPage = Math.min(total, startPage + maxVisible - 1);
            
            if (endPage - startPage + 1 < maxVisible) {
                startPage = Math.max(1, endPage - maxVisible + 1);
            }
            
            // First page
            if (startPage > 1) {
                const firstBtn = document.createElement('button');
                firstBtn.className = 'pagination-btn';
                firstBtn.textContent = '1';
                firstBtn.dataset.page = 1;
                pagination.appendChild(firstBtn);
                
                if (startPage > 2) {
                    const dots = document.createElement('span');
                    dots.className = 'pagination-dots';
                    dots.textContent = '...';
                    pagination.appendChild(dots);
                }
            }
            
            // Page numbers
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn ${i === current ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.dataset.page = i;
                pagination.appendChild(pageBtn);
            }
            
            // Last page
            if (endPage < total) {
                if (endPage < total - 1) {
                    const dots = document.createElement('span');
                    dots.className = 'pagination-dots';
                    dots.textContent = '...';
                    pagination.appendChild(dots);
                }
                
                const lastBtn = document.createElement('button');
                lastBtn.className = 'pagination-btn';
                lastBtn.textContent = total;
                lastBtn.dataset.page = total;
                pagination.appendChild(lastBtn);
            }
            
            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = `pagination-btn ${current === total ? 'disabled' : ''}`;
            nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextBtn.dataset.page = current + 1;
            nextBtn.disabled = current === total;
            pagination.appendChild(nextBtn);
        }

        // Change Page
        function changePage(page) {
            currentPage = page;
            renderProducts();
            window.scrollTo({ top: productsGrid.offsetTop - 100, behavior: 'smooth' });
        }

        // Wishlist Functions
        function toggleWishlist(productId, product) {
            const index = wishlist.findIndex(item => item.id === productId);
            
            if (index === -1) {
                // Add to wishlist
                wishlist.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    farmer: product.farmer,
                    unit: product.unit
                });
                showNotification('Added to wishlist!');
            } else {
                // Remove from wishlist
                wishlist.splice(index, 1);
                showNotification('Removed from wishlist');
            }
            
            // Save to localStorage
            localStorage.setItem('farmVantaraWishlist', JSON.stringify(wishlist));
            
            // Update UI
            updateWishlistCount();
            renderProducts(); // Re-render to update heart icons
        }

        function updateWishlistCount() {
            wishlistCount.textContent = wishlist.length;
        }

        function viewWishlist() {
            if (wishlist.length === 0) {
                showNotification('Your wishlist is empty!', 'info');
                return;
            }
            // In a real app, this would navigate to wishlist page
            showNotification(`You have ${wishlist.length} items in your wishlist`);
        }

        // Compare Functions
        function toggleCompare(productId, product) {
            const index = compareList.findIndex(item => item.id === productId);
            
            if (index === -1) {
                if (compareList.length >= 4) {
                    showNotification('Maximum 4 products can be compared', 'error');
                    return;
                }
                // Add to compare
                compareList.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    farmer: product.farmer,
                    rating: product.rating,
                    category: product.category,
                    description: product.description,
                    certification: product.certification,
                    stock: product.stock
                });
                showNotification('Added to comparison');
            } else {
                // Remove from compare
                compareList.splice(index, 1);
                showNotification('Removed from comparison');
            }
            
            // Save to localStorage
            localStorage.setItem('farmVantaraCompare', JSON.stringify(compareList));
            
            // Update UI
            updateCompareCount();
            renderProducts(); // Re-render to update compare icons
        }

        function updateCompareCount() {
            compareCount.textContent = compareList.length;
        }

        function viewCompare() {
            if (compareList.length === 0) {
                showNotification('No products to compare', 'info');
                return;
            }
            
            showCompareModal();
        }

        function showCompareModal() {
            compareTable.innerHTML = '';
            
            if (compareList.length === 0) {
                compareTable.innerHTML = '<p class="no-compare">Add products to compare</p>';
                compareModal.classList.add('active');
                return;
            }
            
            // Create comparison table
            const table = document.createElement('table');
            
            // Table headers
            const thead = document.createElement('thead');
            thead.innerHTML = `
                <tr>
                    <th>Feature</th>
                    ${compareList.map(product => `<th>${product.name}</th>`).join('')}
                </tr>
            `;
            table.appendChild(thead);
            
            // Table body
            const tbody = document.createElement('tbody');
            
            // Add rows for each feature
            const features = [
                { name: 'Price', key: 'price', format: val => `₹${val}` },
                { name: 'Farmer', key: 'farmer' },
                { name: 'Rating', key: 'rating', format: val => `${val}/5` },
                { name: 'Category', key: 'category' },
                { name: 'Stock', key: 'stock', format: val => val === 'in-stock' ? 'In Stock' : 'Low Stock' },
                { name: 'Certifications', key: 'certification', format: val => val.join(', ') || 'None' }
            ];
            
            features.forEach(feature => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${feature.name}</td>
                    ${compareList.map(product => {
                        let value = product[feature.key];
                        if (feature.format) {
                            value = feature.format(value);
                        }
                        return `<td>${value}</td>`;
                    }).join('')}
                `;
                tbody.appendChild(row);
            });
            
            table.appendChild(tbody);
            compareTable.appendChild(table);
            
            compareModal.classList.add('active');
        }

        function hideCompare() {
            compareModal.classList.remove('active');
        }

        function clearCompareList() {
            compareList = [];
            localStorage.setItem('farmVantaraCompare', JSON.stringify(compareList));
            updateCompareCount();
            renderProducts();
            hideCompare();
            showNotification('Comparison cleared');
        }

        // Filter Functions
        function updateCategoryFilters() {
            const selectedCategories = [];
            document.querySelectorAll('input[name="category"]:checked').forEach(checkbox => {
                selectedCategories.push(checkbox.value);
            });
            currentFilters.categories = selectedCategories;
            updateFilterCount();
        }

        function updateCertificationFilters() {
            const selectedCerts = [];
            document.querySelectorAll('input[name="certification"]:checked').forEach(checkbox => {
                selectedCerts.push(checkbox.value);
            });
            currentFilters.certifications = selectedCerts;
            updateFilterCount();
        }

        function updateRatingFilter() {
            const selectedRating = document.querySelector('input[name="rating"]:checked');
            currentFilters.minRating = selectedRating ? parseInt(selectedRating.value) : 0;
            updateFilterCount();
        }

        function updateFilterCount() {
            let count = 0;
            count += currentFilters.categories.length;
            count += currentFilters.certifications.length;
            count += currentFilters.minRating > 0 ? 1 : 0;
            count += currentFilters.priceRange[0] > 0 || currentFilters.priceRange[1] < 1000 ? 1 : 0;
            
            document.querySelector('.filter-count').textContent = count;
        }

        function showFilters() {
            advancedFilters.classList.add('active');
        }

        function hideFilters() {
            advancedFilters.classList.remove('active');
        }

        function applyFilterChanges() {
            currentPage = 1; // Reset to first page
            renderProducts();
            hideFilters();
            showNotification('Filters applied');
        }

        function clearAllFilters() {
            // Reset all filter inputs
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('input[type="radio"]').forEach(rb => rb.checked = false);
            document.getElementById('priceMin').value = 0;
            document.getElementById('priceMax').value = 1000;
            document.getElementById('minPriceValue').textContent = '₹0';
            document.getElementById('maxPriceValue').textContent = '₹1000';
            
            // Reset filter state
            currentFilters = {
                categories: [],
                priceRange: [0, 1000],
                certifications: [],
                minRating: 0,
                searchTerm: searchInput.value
            };
            
            currentPage = 1;
            updateFilterCount();
            renderProducts();
            hideFilters();
            showNotification('All filters cleared');
        }

        // Search Functions
        function handleSearch(e) {
            e.preventDefault();
            
            const searchTerm = searchInput.value.trim();
            
            // Form validation
            if (searchTerm.length < 2) {
                searchError.textContent = 'Please enter at least 2 characters';
                searchError.classList.add('active');
                searchInput.classList.add('error');
                return;
            }
            
            if (searchTerm.length > 50) {
                searchError.textContent = 'Search term too long';
                searchError.classList.add('active');
                searchInput.classList.add('error');
                return;
            }
            
            // Clear error
            searchError.classList.remove('active');
            searchInput.classList.remove('error');
            
            // Apply search filter
            currentFilters.searchTerm = searchTerm;
            currentPage = 1;
            renderProducts();
        }

        function handleSearchInput() {
            // Real-time search with debounce
            clearTimeout(this.searchTimeout);
            this.searchTimeout = setTimeout(() => {
                currentFilters.searchTerm = searchInput.value.trim();
                currentPage = 1;
                renderProducts();
            }, 500);
        }

        // Sort Products
        function sortProducts() {
            currentPage = 1;
            renderProducts();
        }

        // View Toggle
        function toggleView(button) {
            const isGridView = button.querySelector('.fa-th');
            if (isGridView) {
                productsGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(300px, 1fr))';
                productsGrid.classList.remove('list-view');
            } else {
                productsGrid.style.gridTemplateColumns = '1fr';
                productsGrid.classList.add('list-view');
            }
        }

        // Cart Functions (Enhanced with Order Summary)
        function renderCart() {
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>Your cart is empty</h3>
                        <p>Add some fresh produce to get started!</p>
                    </div>
                `;
                updateOrderSummary();
                return;
            }
            
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}" loading="lazy">
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-title">${item.name}</div>
                        <div class="cart-item-farmer">By ${item.farmer}</div>
                        <div class="cart-item-price">₹${item.price}/${item.unit}</div>
                        <div class="cart-item-controls">
                            <div class="quantity-controls">
                                <button class="quantity-btn minus" data-id="${item.id}">-</button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="quantity-btn plus" data-id="${item.id}">+</button>
                            </div>
                            <div class="remove-item" data-id="${item.id}">
                                <i class="fas fa-trash"></i>
                            </div>
                        </div>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            updateOrderSummary();
            
            // Add event listeners
            document.querySelectorAll('.quantity-btn.minus').forEach(btn => {
                btn.addEventListener('click', function() {
                    updateQuantity(parseInt(this.dataset.id), -1);
                });
            });
            
            document.querySelectorAll('.quantity-btn.plus').forEach(btn => {
                btn.addEventListener('click', function() {
                    updateQuantity(parseInt(this.dataset.id), 1);
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    removeFromCart(parseInt(this.dataset.id));
                });
            });
        }

        function updateOrderSummary() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryFee = subtotal > 299 ? 0 : 50;
            const discount = subtotal > 500 ? 50 : 0;
            const total = subtotal + deliveryFee - discount;
            
            document.querySelector('.subtotal-amount').textContent = `₹${subtotal.toFixed(2)}`;
            document.querySelector('.delivery-amount').textContent = deliveryFee === 0 ? 'FREE' : `₹${deliveryFee.toFixed(2)}`;
            document.querySelector('.discount-amount').textContent = discount === 0 ? '-₹0.00' : `-₹${discount.toFixed(2)}`;
            document.querySelector('.total-amount').textContent = `₹${total.toFixed(2)}`;
        }

        // Enhanced Cart Functions
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: Date.now(),
                    productId: product.id,
                    name: product.name,
                    farmer: product.farmer,
                    image: product.image,
                    price: product.price,
                    unit: product.unit,
                    quantity: 1
                });
            }
            
            renderCart();
            updateCartCount();
            showNotification(`${product.name} added to cart!`);
        }

        function updateQuantity(itemId, change) {
            const item = cart.find(item => item.id === itemId);
            if (item) {
                item.quantity += change;
                if (item.quantity < 1) {
                    removeFromCart(itemId);
                } else {
                    renderCart();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            renderCart();
            updateCartCount();
            showNotification('Item removed from cart');
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }

        function toggleCart() {
            cartSidebar.classList.toggle('active');
        }

        // Enhanced Checkout with Validation
        function proceedToCheckout() {
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            
            if (!cartDeliveryTime.value) {
                showNotification('Please select a delivery time', 'error');
                cartDeliveryTime.focus();
                return;
            }
            
            // Show loading
            checkoutBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            checkoutBtn.disabled = true;
            
            // Simulate checkout processing
            setTimeout(() => {
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const deliveryFee = subtotal > 299 ? 0 : 50;
                const discount = subtotal > 500 ? 50 : 0;
                const total = subtotal + deliveryFee - discount;
                
                const orderSummary = {
                    items: cart,
                    deliveryTime: cartDeliveryTime.value,
                    subtotal,
                    deliveryFee,
                    discount,
                    total,
                    location: currentLocation.textContent
                };
                
                // In a real app, this would submit to a server
                console.log('Order Summary:', orderSummary);
                
                // Show success message
                showNotification('Order placed successfully! Redirecting to payment...', 'success');
                
                // Reset button
                checkoutBtn.innerHTML = '<i class="fas fa-lock"></i> Proceed to Checkout';
                checkoutBtn.disabled = false;
                
                // Clear cart
                cart = [];
                renderCart();
                updateCartCount();
                toggleCart();
                
                // Show order confirmation
                setTimeout(() => {
                    alert(`Order Confirmed!\n\nTotal: ₹${total.toFixed(2)}\nDelivery: ${getDeliveryTimeText(cartDeliveryTime.value)}\nThank you for your order!`);
                }, 1000);
                
            }, 1500);
        }

        function getDeliveryTimeText(timeValue) {
            const times = {
                'morning': 'Morning (8AM-12PM)',
                'afternoon': 'Afternoon (12PM-4PM)',
                'evening': 'Evening (4PM-8PM)',
                'next-day': 'Next Day'
            };
            return times[timeValue] || 'Standard Delivery';
        }

        // Location and Delivery Time Functions
        function setLocation() {
            const location = prompt('Enter your delivery location (city):');
            if (location && location.trim()) {
                currentLocation.textContent = location.trim();
                deliveryTimeSelector.classList.add('active');
                showNotification(`Delivery location set to: ${location.trim()}`);
                
                // Save to localStorage
                localStorage.setItem('farmVantaraLocation', location.trim());
            }
        }

        function updateDeliveryTime() {
            const selectedTime = cartDeliveryTime.value;
            if (selectedTime) {
                showNotification(`Delivery time set to: ${getDeliveryTimeText(selectedTime)}`);
                localStorage.setItem('farmVantaraDeliveryTime', selectedTime);
            }
        }

        // Helper Functions
        function getStarRating(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= Math.floor(rating)) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i === Math.ceil(rating) && !Number.isInteger(rating)) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }

        function showNotification(message, type = 'success') {
            // Remove existing notifications
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? 'var(--primary-green)' : type === 'error' ? '#eb5757' : '#f2c94c'};
                color: white;
                border-radius: 10px;
                box-shadow: var(--shadow);
                z-index: 3000;
                animation: slideIn 0.3s ease;
                max-width: 400px;
                word-wrap: break-word;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function toggleBackToTop() {
            if (window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        }

        // Render Farmers
        async function renderFarmers() {
            const farmersSlider = document.getElementById('farmersSlider');
            farmersSlider.innerHTML = '';
            
            farmers.forEach(farmer => {
                const farmerCard = document.createElement('div');
                farmerCard.className = 'farmer-card';
                farmerCard.innerHTML = `
                    <div class="farmer-header">
                        <div class="farmer-avatar-large">
                            <img src="${farmer.image}" alt="${farmer.name}" loading="lazy">
                        </div>
                        <div class="farmer-info">
                            <h3>${farmer.name}</h3>
                            <div class="farmer-location">
                                <i class="fas fa-map-marker-alt"></i>
                                ${farmer.location}
                            </div>
                            <div class="farmer-rating">
                                ${getStarRating(farmer.rating)}
                                <span>${farmer.rating}/5</span>
                            </div>
                        </div>
                    </div>
                    <div class="farmer-products">
                        <h4>Specializes In</h4>
                        <div class="product-tags">
                            ${farmer.products.map(product => `<span class="product-tag">${product}</span>`).join('')}
                        </div>
                    </div>
                    <div class="farmer-actions">
                        <button class="btn-view-farm" data-id="${farmer.id}" aria-label="View ${farmer.name}'s farm">
                            <i class="fas fa-tractor"></i>
                            View Farm
                        </button>
                    </div>
                `;
                
                farmersSlider.appendChild(farmerCard);
            });
        }

        // Initialize from localStorage
        function initializeFromStorage() {
            // Load saved location
            const savedLocation = localStorage.getItem('farmVantaraLocation');
            if (savedLocation) {
                currentLocation.textContent = savedLocation;
                deliveryTimeSelector.classList.add('active');
            }
            
            // Load saved delivery time
            const savedDeliveryTime = localStorage.getItem('farmVantaraDeliveryTime');
            if (savedDeliveryTime) {
                cartDeliveryTime.value = savedDeliveryTime;
            }
        }

        // Call initialization from storage
        initializeFromStorage();

        // Add CSS for notifications and animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            .compare-toggle {
                position: absolute;
                top: 15px;
                right: 15px;
                width: 35px;
                height: 35px;
                background: rgba(255, 255, 255, 0.9);
                border: 2px solid var(--medium-gray);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--text-light);
                cursor: pointer;
                transition: var(--transition);
                z-index: 2;
            }
            
            .compare-toggle:hover,
            .compare-toggle.active {
                background: var(--primary-green);
                border-color: var(--primary-green);
                color: white;
            }
            
            .product-location {
                font-size: 12px;
                color: var(--text-light);
                display: flex;
                align-items: center;
                gap: 5px;
            }
            
            .no-products {
                grid-column: 1 / -1;
                text-align: center;
                padding: 60px 20px;
            }
            
            .no-products i {
                font-size: 60px;
                color: var(--medium-gray);
                margin-bottom: 20px;
            }
            
            .no-products h3 {
                color: var(--text-dark);
                margin-bottom: 10px;
            }
            
            .no-products p {
                color: var(--text-light);
            }
            
            .products-grid.list-view .product-card {
                display: flex;
                flex-direction: row;
            }
            
            .products-grid.list-view .product-image {
                flex: 0 0 250px;
                height: auto;
            }
            
            .products-grid.list-view .product-content {
                flex: 1;
            }
            
            @media (max-width: 768px) {
                .products-grid.list-view .product-card {
                    flex-direction: column;
                }
                
                .products-grid.list-view .product-image {
                    flex: 0 0 200px;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>